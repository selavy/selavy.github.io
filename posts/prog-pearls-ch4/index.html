<!doctype html>

<html lang="en-us">

<head>
  <title>c&#39;est la vie</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="The HTML5 Herald" />
  <meta name="author" content="Peter Lesslie" />
  <meta name="generator" content="Hugo 0.40.1" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda" />
  <link rel="stylesheet" type="text/css" href="https://selavy.github.io/css/styles.css" />
</head>

<body>
  <div id="container">
    <header>
      <h1>
                <a href="https://selavy.github.io/">c&rsquo;est la vie</a>
            </h1>

      <ul id="social-media">
          
        <li><a href="https://github.com/selavy"><i class="fa fa-github fa-lg" aria-hidden="true"></i></a></li>
           
      </ul>
      
    </header>

    
<nav>
    <ul>
        
        <li>
            <a class="" href="https://selavy.github.io/posts/">
                <i class="fa-li fa  fa-lg"></i><span>Posts</span>
            </a>
        </li>
        
        <li>
            <a class="" href="https://selavy.github.io/about/">
                <i class="fa-li fa  fa-lg"></i><span>About</span>
            </a>
        </li>
        
    </ul>
</nav>

    <main>




<article>

    <h1>Programming Pearls: Chapter 4</h1>

    
        <aside>
    <ul>
        <li>
            <time class="post-date" datetime="2019-02-14T18:51:49-08:00">Feb 14, 2019</time>
        </li>
        
        

        

        <li>4 min read</li>
    </ul>
</aside>
    

    

<p>Problems from Column #3: Data Structures Programs</p>

<h1 id="lessons">Lessons</h1>

<ul>
<li>Consider using formal verification methods on tricky functions</li>
<li>Loop invariants are a helpful tool</li>
</ul>

<h1 id="problem-1">Problem #1</h1>

<p>As laborious as our proof of binary search was, it is still unfinished by some standards. How would you prove that the program is free of run-time errors (such as division by zero, word overflow, variables out of declared range, or array indices out of bounds)? If you have a background in discrete mathematics, can you formatlize the proof in a logical system?</p>

<h1 id="problem-2">Problem #2</h1>

<p>If the original binary search was too easy for you, try the variant that returns in <em>p</em> the position of the first occurence of t in the array x (if there are multiple occurences of t, the original algorithm returns an arbitrary one). Your code should make a logarithmic number of comparisons of array elements; it is possible to do the job in log_2(n) such comparisons.</p>

<h1 id="problem-3">Problem #3</h1>

<p>Write and verify a recursive binary search program. Which parts of the code and proof stay the same as in the iterative version, and which parts change?</p>

<p>First the iterative version of bsearch:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">// NOTE: this is the interface that he describes in the
</span><span style="color:#75715e">// book, but a half open interval is definitely the
</span><span style="color:#75715e">// better way to code bsearch (see c++ standard lib)
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">bsearch2</span>(<span style="color:#66d9ef">int</span> t, <span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>x, <span style="color:#66d9ef">int</span> n)
{
    <span style="color:#75715e">/*
</span><span style="color:#75715e">     * precondition: x[0] &lt;= x[1] &lt;= ... &lt;= x[n-1]
</span><span style="color:#75715e">     * postcondition:
</span><span style="color:#75715e">     *     result == -1    =&gt; t not present in x
</span><span style="color:#75715e">     *     0 &lt;= result &lt; n =&gt; x[result] == t
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">int</span> l <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">int</span> u <span style="color:#f92672">=</span> n <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">int</span> m;
    <span style="color:#66d9ef">while</span> (l <span style="color:#f92672">&lt;=</span> u) {
        <span style="color:#75715e">// m = (l + u) / 2; // l + ((u - l) / 2)
</span><span style="color:#75715e"></span>	    <span style="color:#75715e">// to be correct for overflow:
</span><span style="color:#75715e"></span>		m <span style="color:#f92672">=</span> l <span style="color:#f92672">+</span> ((u <span style="color:#f92672">-</span> l) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>)
        <span style="color:#66d9ef">if</span> (x[m] <span style="color:#f92672">&lt;</span> t) {
            l <span style="color:#f92672">=</span> m <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>;
        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (x[m] <span style="color:#f92672">==</span> t) {
            <span style="color:#66d9ef">return</span> m;
        } <span style="color:#66d9ef">else</span> { <span style="color:#75715e">// x[m] &gt; t
</span><span style="color:#75715e"></span>            u <span style="color:#f92672">=</span> m <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
        }
    }
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
}
</code></pre></div>
<p>The recursive version (I didn&rsquo;t realize that lambdas can&rsquo;t be used recursively):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">go</span>(<span style="color:#66d9ef">int</span> t, <span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>x, <span style="color:#66d9ef">int</span> l, <span style="color:#66d9ef">int</span> u)
{
    <span style="color:#66d9ef">if</span> (l <span style="color:#f92672">&gt;</span> u)        <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">int</span> m <span style="color:#f92672">=</span> l <span style="color:#f92672">+</span> ((u <span style="color:#f92672">-</span> l) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>);
    <span style="color:#66d9ef">if</span> (x[m] <span style="color:#f92672">&lt;</span> t)       <span style="color:#66d9ef">return</span> go(t, x, m<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>, u);
    <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (x[m] <span style="color:#f92672">==</span> t) <span style="color:#66d9ef">return</span> m;
    <span style="color:#66d9ef">else</span>                <span style="color:#66d9ef">return</span> go(t, x, l, m<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>);
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">bsearch_recursive</span>(<span style="color:#66d9ef">int</span> t, <span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>x, <span style="color:#66d9ef">int</span> n) { <span style="color:#66d9ef">return</span> go(t, x, <span style="color:#ae81ff">0</span>, n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>); }
</code></pre></div>
<h1 id="problem-4">Problem #4</h1>

<p>Add fictitious &ldquo;timing variables&rdquo; to your binary search program to count the number of comparisons it makes, and use program verification techniques to prove that its run time is indeed logarithmic.</p>

<h1 id="problem-5">Problem #5</h1>

<p>Prove that this program terminates when its input <em>x</em> is a positive integer.</p>

<pre><code>while x != 1 do
    if even(x)
        x = x/2
    else
        x = 3*x+1
</code></pre>

<h1 id="problem-6">Problem #6</h1>

<p>David Gries calls this the &ldquo;Coffee Can Problem&rdquo; in his <em>Science of Programming</em>. You are initially given a coffee can that contains some black beans and some white beans and a large pile of &ldquo;extra&rdquo; black beans. You then repeat the following process until there is a single bean left in the can.</p>

<pre><code>Randomly select two beans from the can. If they are the same color, throw them both out and insert an extra black bean. If they are different colors, return the white bean to the can and throw out the black.
</code></pre>

<p>Prove that the process terminates. What can you say about the color of the final remaining bean as a function of the number of black and white beans originally in the can?</p>

<p>If even white, then black final bean.</p>

<h1 id="problem-7">Problem #7</h1>

<p>A colleague faced the following problem in a program to draw lines on a bit-mapped display. An array of <em>n</em> pairs of reals (a_i, b_i) defined the <em>n</em> lines y_i = a_i*x + b_i. The lines were ordered in the x-iunterval [0, 1] in the sense that y<em>i &lt; y</em>{i+1} for all values of <em>i</em> between 0 and n-2 and all values of <em>x</em> in [0,1]. Les formally, the lines don&rsquo;t touch in the vertical slab. Given a point (x,y), where 0&lt;=x&lt;=1, he wanted to determine the two lines that bracket the point. How could he solve the problem quickly?</p>


</article>


<section class="post-nav">
    <ul>
        
        <li>
            <a href="https://selavy.github.io/posts/prog-pearls-ch3/"><i class="fa fa-chevron-circle-left"></i> Programming Pearls: Chapter 3</a>
        </li>
        
        
    </ul>
</section>
    





</main>
    <footer>
        <h6> | 
            Rendered by <a href="https://gohugo.io" title="Hugo">Hugo</a> |
            <a href="https://selavy.github.io/index.xml">Subscribe</a></h6>
    </footer>
</div>
<script src="https://selavy.github.io/js/scripts.js"></script>
</body>

</html>